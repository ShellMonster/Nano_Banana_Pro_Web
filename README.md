# Banana Pro Web (å¤§é¦™è•‰å›¾ç‰‡ç”Ÿæˆå·¥å…·)

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![React](https://img.shields.io/badge/React-18.3.1-blue.svg)
![Go](https://img.shields.io/badge/Go-1.24.3-00ADD8.svg)
![Gemini](https://img.shields.io/badge/GenAI%20SDK-1.40.0-orange.svg)

Banana Pro Web æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ã€æ˜“æ‰©å±•çš„æ‰¹é‡å›¾ç‰‡ç”Ÿæˆå¹³å°ï¼Œä¸“ä¸ºåˆ›æ„å·¥ä½œè€…è®¾è®¡ã€‚å®ƒåŸºäº Google Gemini APIï¼Œæ”¯æŒé«˜åˆ†è¾¨ç‡ï¼ˆæœ€é«˜ 4Kï¼‰çš„æ–‡ç”Ÿå›¾ä¸å›¾ç”Ÿå›¾åŠŸèƒ½ï¼Œå¹¶æä¾›ç›´è§‚çš„æ‰¹é‡ä»»åŠ¡ç®¡ç†ç•Œé¢ã€‚

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

- **ğŸš€ æé€Ÿç”Ÿæˆ**ï¼šåŸºäº Go è¯­è¨€åç«¯ä¸ Worker æ± åŒ–æŠ€æœ¯ï¼Œæ”¯æŒå¤šä»»åŠ¡å¹¶å‘å¤„ç†ã€‚
- **ğŸ¨ 4K è¶…æ¸…æ”¯æŒ**ï¼šæ·±åº¦ä¼˜åŒ– Gemini 3.0 æ¨¡å‹å‚æ•°ï¼Œå®Œç¾æ”¯æŒ 16:9ã€4:3 ç­‰å¤šç§ç”»å¹…çš„ 4K è¶…æ¸…ç”Ÿæˆã€‚
- **ğŸ“¸ æ™ºèƒ½å›¾ç”Ÿå›¾**ï¼šæ”¯æŒå¤šå¼ å‚è€ƒå›¾è¾“å…¥ï¼Œç²¾å‡†æ§åˆ¶ç”Ÿæˆé£æ ¼ä¸å†…å®¹ã€‚
- **ğŸ“¦ æ‰¹é‡å¤„ç†**ï¼šä¸€é”®å¼€å¯æ‰¹é‡ç”Ÿæˆæ¨¡å¼ï¼Œå®æ—¶è¿›åº¦ç›‘æ§ã€‚
- **ğŸ’¾ å†å²è®°å½•ç®¡ç†**ï¼šå®Œæ•´çš„ä»»åŠ¡å†å²è¿½è¸ªï¼Œæ”¯æŒå¤±è´¥ä»»åŠ¡ä¸€é”®é‡è¯•ä¸æœ¬åœ°ç¼“å­˜æ¢å¤ã€‚
- **ğŸ”Œ çµæ´»æ‰©å±•**ï¼šæ¨¡å—åŒ– Provider è®¾è®¡ï¼Œå¯è½»æ¾æ¥å…¥å…¶ä»–ä¸»æµ AI æ¨¡å‹ã€‚

## ï¿½ï¸ ç•Œé¢é¢„è§ˆ

ç³»ç»Ÿé‡‡ç”¨ç»å…¸çš„**ä¸‰æ å¼å“åº”å¼å¸ƒå±€**ï¼š
1. **å·¦ä¾§é…ç½®é¢æ¿**ï¼šå®æ—¶è°ƒæ•´æ¨¡å‹å‚æ•°ï¼ˆæ¯”ä¾‹ã€åˆ†è¾¨ç‡ã€ç”Ÿæˆæ•°é‡ã€å‚è€ƒå›¾ä¸Šä¼ ï¼‰ã€‚
2. **ä¸­é—´ç”ŸæˆåŒºåŸŸ**ï¼šå±•ç¤ºå½“å‰ç”Ÿæˆä»»åŠ¡çš„å®æ—¶çŠ¶æ€ã€å€’è®¡æ—¶ã€è¿›åº¦æ¡åŠç”Ÿæˆç»“æœã€‚
3. **å³ä¾§å†å²é¢æ¿**ï¼šæŒä¹…åŒ–å­˜å‚¨å†å²ç”Ÿæˆè®°å½•ï¼Œæ”¯æŒç€‘å¸ƒæµé¢„è§ˆã€å¤§å›¾æŸ¥çœ‹åŠè®°å½•åˆ é™¤ã€‚

## ï¿½ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯ (Backend)
- **è¯­è¨€**: Go v1.24.3 (é«˜æ€§èƒ½é€»è¾‘å¤„ç†)
- **æ¡†æ¶**: Gin v1.11.0 (API è·¯ç”±ç®¡ç†)
- **æ¨¡å‹é›†æˆ**: Google GenAI SDK v1.40.0 (Gemini æ¨¡å‹å¯¹æ¥)
- **æ•°æ®åº“**: SQLite + GORM v1.25.12 (ä»»åŠ¡ä¸å…ƒæ•°æ®å­˜å‚¨)
- **å­˜å‚¨**: é˜¿é‡Œäº‘ OSS / æœ¬åœ°å­˜å‚¨ (å›¾ç‰‡å¼‚æ­¥å­˜å‚¨)
- **é…ç½®ç®¡ç†**: Viper v1.21.0 (å¤šæ ¼å¼é…ç½®æ”¯æŒ)

### å‰ç«¯ (Frontend)
- **æ¡†æ¶**: React v18.3.1 (UI å¼€å‘æ¡†æ¶)
- **æ„å»ºå·¥å…·**: Vite v6.0.7 (æé€Ÿæ„å»ºå·¥å…·)
- **çŠ¶æ€ç®¡ç†**: Zustand v5.0.2 (è½»é‡çº§çŠ¶æ€ç®¡ç†)
- **æ ·å¼**: Tailwind CSS v3.4.17 (å“åº”å¼ UI è®¾è®¡)
- **å›¾æ ‡**: Lucide React v0.468.0 (çŸ¢é‡å›¾æ ‡åº“)
- **ç½‘ç»œè¯·æ±‚**: Axios + React Query (æ•°æ®è¯·æ±‚ä¸ç¼“å­˜)
- **ç±»å‹ç³»ç»Ÿ**: TypeScript v5.6.3 (ä»£ç ç±»å‹å®‰å…¨)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®
```bash
git clone git@github.com:ShellMonster/Nano_Banana_Pro_Web.git
cd Nano_Banana_Pro_Web
```

### 2. åç«¯å¯åŠ¨ (å¼€å‘ç¯å¢ƒ)
```bash
cd backend
# ä¿®æ”¹ internal/config/config.yaml ä¸­çš„ providers.gemini.api_key
go mod download
go run cmd/server/main.go
```
åç«¯æœåŠ¡é»˜è®¤è¿è¡Œåœ¨ `http://localhost:8080`ã€‚

### 3. å‰ç«¯å¯åŠ¨ (å¼€å‘ç¯å¢ƒ)
```bash
cd frontend
npm install
npm run dev
```
å‰ç«¯å¼€å‘ç¯å¢ƒé»˜è®¤è¿è¡Œåœ¨ `http://localhost:5173`ã€‚

### 4. ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
**åç«¯ç¼–è¯‘ï¼š**
```bash
cd backend
go build -o server cmd/server/main.go
./server
```
**å‰ç«¯æ‰“åŒ…ï¼š**
```bash
cd frontend
npm run build
# äº§ç‰©åœ¨ dist ç›®å½•ï¼Œå¯ä½¿ç”¨ Nginx æ‰˜ç®¡
```

## âš™ï¸ é…ç½®è¯´æ˜

### åç«¯é…ç½® (`backend/configs/config.yaml`)

| é…ç½®é¡¹ | æè¿° | é»˜è®¤å€¼ / ç¤ºä¾‹ |
| :--- | :--- | :--- |
| `server.port` | åç«¯æœåŠ¡ç›‘å¬ç«¯å£ | `8080` |
| `database.path` | SQLite æ•°æ®åº“æ–‡ä»¶è·¯å¾„ | `storage/local/service.db` |
| `storage.local_dir` | æœ¬åœ°å›¾ç‰‡å­˜å‚¨æ ¹ç›®å½• | `storage/local` |
| `storage.oss.enabled` | æ˜¯å¦å¯ç”¨é˜¿é‡Œäº‘ OSS | `false` |
| `providers.gemini.api_key` | **[å¿…å¡«]** Google Gemini API Key | `"YOUR_KEY"` |
| `providers.gemini.api_base` | Gemini API ä»£ç†åœ°å€ | `https://...` |

### å‰ç«¯é…ç½® (`frontend/.env.development`)

| é…ç½®é¡¹ | æè¿° | ç¤ºä¾‹ |
| :--- | :--- | :--- |
| `VITE_API_URL` | åç«¯ API æœåŠ¡åœ°å€ | `http://localhost:8080/api/v1` |
| `VITE_WS_URL` | WebSocket é€šä¿¡åœ°å€ | `ws://localhost:8080/api/v1` |

## ğŸ“¡ API æ¥å£æ¦‚è§ˆ

| è·¯å¾„ | æ–¹æ³• | æè¿° |
| :--- | :--- | :--- |
| `/health` | `GET` | å¥åº·æ£€æŸ¥ |
| `/api/v1/tasks/generate` | `POST` | æ–‡ç”Ÿå›¾ä»»åŠ¡æäº¤ (JSON) |
| `/api/v1/tasks/generate-with-images` | `POST` | å›¾ç”Ÿå›¾ä»»åŠ¡æäº¤ (Multipart) |
| `/api/v1/tasks/:task_id` | `GET` | è·å–ä»»åŠ¡å®æ—¶è¿›åº¦ |
| `/api/v1/images` | `GET` | è·å–å†å²å›¾ç‰‡åˆ—è¡¨ |
| `/api/v1/images/:id` | `DELETE` | åˆ é™¤å•å¼ å›¾ç‰‡è®°å½• |
| `/storage/*` | `GET` | é™æ€å›¾ç‰‡èµ„æºè®¿é—® |

## ğŸ“‚ é¡¹ç›®ç»“æ„

```text
.
â”œâ”€â”€ backend/               # Go åç«¯ä»£ç 
â”‚   â”œâ”€â”€ cmd/               # ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ configs/           # é…ç½®æ–‡ä»¶ (YAML)
â”‚   â”œâ”€â”€ internal/          # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ api/           # API å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ model/         # æ•°æ®åº“æ¨¡å‹ä¸ GORM
â”‚   â”‚   â”œâ”€â”€ provider/      # AI æ¨¡å‹é€‚é…å™¨ (Gemini ç­‰)
â”‚   â”‚   â””â”€â”€ worker/        # å¹¶å‘ä»»åŠ¡æ‰§è¡Œæ± 
â”‚   â””â”€â”€ storage/           # æ•°æ®ä¸å›¾ç‰‡æŒä¹…åŒ–ç›®å½•
â””â”€â”€ frontend/              # React å‰ç«¯ä»£ç 
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ components/    # UI ç»„ä»¶ (ç”ŸæˆåŒºã€å†å²åŒºç­‰)
    â”‚   â”œâ”€â”€ hooks/         # è‡ªå®šä¹‰ Hook (ç”Ÿæˆé€»è¾‘å°è£…)
    â”‚   â”œâ”€â”€ services/      # API è¯·æ±‚å°è£…
    â”‚   â””â”€â”€ store/         # Zustand çŠ¶æ€ç®¡ç†
    â””â”€â”€ public/            # é™æ€èµ„æº
```

## ğŸ› ï¸ å¼€å‘ä¸æ‰©å±•

### å¦‚ä½•æ·»åŠ æ–°çš„ AI æ¨¡å‹ Providerï¼Ÿ
1. åœ¨ `backend/internal/provider/` ä¸‹å®ç° `Provider` æ¥å£ã€‚
2. åœ¨ `provider.go` çš„ `InitProviders` å‡½æ•°ä¸­æ·»åŠ å¯¹åº”çš„å·¥å‚åˆ†æ”¯ã€‚
3. åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ç›¸åº”çš„é…ç½®é¡¹ã€‚

### å¹¶å‘æ€§èƒ½ä¼˜åŒ–
å¯ä»¥é€šè¿‡ä¿®æ”¹ `backend/cmd/server/main.go` ä¸­çš„ `worker.InitPool` å‚æ•°æ¥è°ƒæ•´å¹¶å‘çº¿ç¨‹æ•°ã€‚æ¨èè®¾ç½®ä¸º CPU æ ¸å¿ƒæ•°çš„ 2-3 å€ã€‚

## â“ å¸¸è§é—®é¢˜ (FAQ)

**Q: ä¸ºä»€ä¹ˆç”Ÿæˆæç¤º 429 Too Many Requestsï¼Ÿ**
A: è¿™æ˜¯ Gemini API çš„é¢‘ç‡é™åˆ¶ã€‚è¯·æ£€æŸ¥ API Key çš„é…é¢ï¼Œæˆ–åœ¨åç«¯é…ç½®ä¸­æ›´æ¢æ›´é«˜çº§åˆ«çš„ API Keyã€‚

**Q: å›¾ç‰‡ç”ŸæˆæˆåŠŸä½†å‰ç«¯ä¸æ˜¾ç¤ºï¼Ÿ**
A: è¯·æ£€æŸ¥åç«¯ `storage` ç›®å½•çš„è¯»å†™æƒé™ï¼Œä»¥åŠå‰ç«¯ `.env` ä¸­çš„ `VITE_API_URL` æ˜¯å¦æ­£ç¡®æŒ‡å‘äº†åç«¯åœ°å€ã€‚

## ï¿½ å¼€æºåè®®

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) åè®®å¼€æºã€‚

---
*Created by [ShellMonster](https://github.com/ShellMonster)*
